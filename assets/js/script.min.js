var scene,camera,canvas,renderer,cardGroup,comingSoonGroup;window.innerWidth<768&&[].slice.call(document.querySelectorAll("[data-bss-disabled-mobile]")).forEach((function(e){e.classList.remove("animated"),e.removeAttribute("data-bss-hover-animate"),e.removeAttribute("data-aos"),e.removeAttribute("data-bss-parallax-bg"),e.removeAttribute("data-bss-scroll-zoom")})),document.addEventListener("DOMContentLoaded",(function(){"AOS"in window&&AOS.init()}),!1);var cardGeometry,cardLoader,cardMaterial,cardCube,iconGeometry,iconLoader,iconMaterial,iconCube,raycaster=new THREE.Raycaster,pickPosition={x:0,y:0},windowSizeX=document.getElementById("3d-card").offsetWidth,windowSizeY=document.getElementById("3d-card").offsetHeight,cameraPosZ=14,cameraPosZ_max=15,cameraPosZ_min=5,cameraPosZ_current=cameraPosZ,cameraPosY=0,cameraPosY_current=cameraPosY,cardWidth=9,cardHeight=14.994,cardFrontURL="3d_card/card_front.png",cardBackURL="3d_card/card_back.png",cardBackPosZ=-.001,mouseX=16,mouseY=0,windowHalfX=windowSizeX/2,windowHalfY=windowSizeX/2;function init(){scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(75,windowSizeX/windowSizeY,.1,1e3);var e=document.getElementById("3d-card");(renderer=new THREE.WebGLRenderer({antialias:!0,canvas:e})).setClearColor(16777215,0),renderer.setSize(windowSizeX,windowSizeY),cardGroup=new THREE.Object3D,comingSoonGroup=new THREE.Object3D,cardFrontGeometry=new THREE.PlaneGeometry(cardWidth,cardHeight),cardFrontLoader=new THREE.TextureLoader,cardFrontMaterial=new THREE.MeshBasicMaterial({map:cardFrontLoader.load(cardFrontURL)}),cardFrontCube=new THREE.Mesh(cardFrontGeometry,cardFrontMaterial),cardFrontCube.name="card front",cardGroup.add(cardFrontCube),cardBackGeometry=new THREE.PlaneGeometry(cardWidth,cardHeight),cardBackLoader=new THREE.TextureLoader,cardBackMaterial=new THREE.MeshBasicMaterial({map:cardBackLoader.load(cardBackURL)}),cardBackCube=new THREE.Mesh(cardBackGeometry,cardBackMaterial),cardBackCube.name="card back",cardBackCube.position.z=cardBackPosZ,cardBackCube.rotation.y=THREE.MathUtils.degToRad(180),cardGroup.add(cardBackCube),document.addEventListener("mousedown",onDocumentMouseDown,!1),document.addEventListener("touchstart",onDocumentTouchStart,!1),document.addEventListener("touchmove",onDocumentTouchMove,!1),window.addEventListener("mouseout",clearPickPosition),window.addEventListener("mouseleave",clearPickPosition),window.addEventListener("wheel",onDocumentOnWheel),window.addEventListener("resize",onWindowResize,!1),scene.add(cardGroup),scene.add(comingSoonGroup),camera.position.z=cameraPosZ}function onDocumentMouseDown(e){e.preventDefault(),document.addEventListener("mousemove",onDocumentMouseMove,!1),document.addEventListener("mouseup",onDocumentMouseUp,!1),document.addEventListener("mouseout",onDocumentMouseOut,!1),window.addEventListener("touchstart",(e=>{e.preventDefault(),setPickPosition(e.touches[0])}),{passive:!1}),window.addEventListener("touchmove",(e=>{setPickPosition(e.touches[0])}))}function onDocumentMouseMove(e){mouseX=e.clientX-windowHalfX,mouseY=e.clientY-windowHalfY}function onDocumentMouseUp(e){document.removeEventListener("mousemove",onDocumentMouseMove,!1),document.removeEventListener("mouseup",onDocumentMouseUp,!1),document.removeEventListener("mouseout",onDocumentMouseOut,!1)}function onDocumentMouseOut(e){document.removeEventListener("mousemove",onDocumentMouseMove,!1),document.removeEventListener("mouseup",onDocumentMouseUp,!1),document.removeEventListener("mouseout",onDocumentMouseOut,!1)}function onDocumentTouchStart(e){1==e.touches.length&&e.preventDefault()}function onDocumentTouchMove(e){1==e.touches.length&&(e.preventDefault(),mouseX=e.touches[0].pageX-windowHalfX,mouseY=e.touches[0].pageY-windowHalfY)}function onDocumentOnWheel(e){}function onWindowResize(){windowHalfX=windowSizeX/2,windowHalfY=windowSizeY/2,camera.aspect=windowSizeX/windowSizeY,camera.updateProjectionMatrix(),renderer.setSize(windowSizeX,windowSizeY)}function getCanvasRelativePosition(e){const t=container.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function setPickPosition(e){const t=getCanvasRelativePosition(e);pickPosition.x=t.x/windowSizeX*2-1,pickPosition.y=t.y/windowSizeY*-2+1}function clearPickPosition(){pickPosition.x=-1e5,pickPosition.y=-1e5}function animate(){mouseYmax=300,mouseYmin=-300,requestAnimationFrame(animate),mouseY<mouseYmax&&mouseY>mouseYmin?cardGroup.rotation.x=.002*mouseY:(mouseY>=mouseYmax&&(mouseY=mouseYmax),mouseY<=mouseYmin&&(mouseY=mouseYmin)),cardGroup.rotation.y=.02*mouseX,camera.position.z=cameraPosZ_current,renderer.render(scene,camera)}init(),animate();"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}var FlipDown=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flipdown",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(_classCallCheck(this,e),"number"!=typeof t)throw new Error("FlipDown: Constructor expected unix timestamp, got ".concat(_typeof(t)," instead."));"object"===_typeof(o)&&(n=o,o="flipdown"),this.version="0.3.2",this.initialised=!1,this.now=this._getTime(),this.epoch=t,this.countdownEnded=!1,this.hasEndedCallback=null,this.element=document.getElementById(o),this.rotors=[],this.rotorLeafFront=[],this.rotorLeafRear=[],this.rotorTops=[],this.rotorBottoms=[],this.countdown=null,this.daysRemaining=0,this.clockValues={},this.clockStrings={},this.clockValuesAsString=[],this.prevClockValuesAsString=[],this.opts=this._parseOptions(n),this._setOptions(),console.log("FlipDown ".concat(this.version," (Theme: ").concat(this.opts.theme,")"))}return _createClass(e,[{key:"start",value:function(){return this.initialised||this._init(),this.countdown=setInterval(this._tick.bind(this),1e3),this}},{key:"ifEnded",value:function(e){return this.hasEndedCallback=function(){e(),this.hasEndedCallback=null},this}},{key:"_getTime",value:function(){return(new Date).getTime()/1e3}},{key:"_hasCountdownEnded",value:function(){return this.epoch-this.now<0?(this.countdownEnded=!0,null!=this.hasEndedCallback&&(this.hasEndedCallback(),this.hasEndedCallback=null),!0):(this.countdownEnded=!1,!1)}},{key:"_parseOptions",value:function(e){var t=["Days","Hours","Minutes","Seconds"];return e.headings&&4===e.headings.length&&(t=e.headings),{theme:e.hasOwnProperty("theme")?e.theme:"dark",headings:t}}},{key:"_setOptions",value:function(){this.element.classList.add("flipdown__theme-".concat(this.opts.theme))}},{key:"_init",value:function(){this.initialised=!0,this._hasCountdownEnded()?this.daysremaining=0:this.daysremaining=Math.floor((this.epoch-this.now)/86400).toString().length;for(var e=this.daysremaining<=2?2:this.daysremaining,t=0;t<e+6;t++)this.rotors.push(this._createRotor(0));var o=[];for(t=0;t<e;t++)o.push(this.rotors[t]);this.element.appendChild(this._createRotorGroup(o,0));var n=e;for(t=0;t<3;t++){for(var i=[],a=0;a<2;a++)i.push(this.rotors[n]),n++;this.element.appendChild(this._createRotorGroup(i,t+1))}return this.rotorLeafFront=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-leaf-front")),this.rotorLeafRear=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-leaf-rear")),this.rotorTop=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-top")),this.rotorBottom=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-bottom")),this._tick(),this._updateClockValues(!0),this}},{key:"_createRotorGroup",value:function(e,t){var o=document.createElement("div");o.className="rotor-group";var n=document.createElement("div");return n.className="rotor-group-heading",n.setAttribute("data-before",this.opts.headings[t]),o.appendChild(n),appendChildren(o,e),o}},{key:"_createRotor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=document.createElement("div"),o=document.createElement("div"),n=document.createElement("figure"),i=document.createElement("figure"),a=document.createElement("div"),r=document.createElement("div");return t.className="rotor",o.className="rotor-leaf",n.className="rotor-leaf-rear",i.className="rotor-leaf-front",a.className="rotor-top",r.className="rotor-bottom",n.textContent=e,a.textContent=e,r.textContent=e,appendChildren(t,[o,a,r]),appendChildren(o,[n,i]),t}},{key:"_tick",value:function(){this.now=this._getTime();var e=this.epoch-this.now<=0?0:this.epoch-this.now;this.clockValues.d=Math.floor(e/86400),e-=86400*this.clockValues.d,this.clockValues.h=Math.floor(e/3600),e-=3600*this.clockValues.h,this.clockValues.m=Math.floor(e/60),e-=60*this.clockValues.m,this.clockValues.s=Math.floor(e),this._updateClockValues(),this._hasCountdownEnded()}},{key:"_updateClockValues",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];function o(){var e=this;this.rotorTop.forEach((function(t,o){t.textContent!=e.clockValuesAsString[o]&&(t.textContent=e.clockValuesAsString[o])}))}function n(){var e=this;this.rotorLeafRear.forEach((function(t,o){if(t.textContent!=e.clockValuesAsString[o]){t.textContent=e.clockValuesAsString[o],t.parentElement.classList.add("flipped");var n=setInterval(function(){t.parentElement.classList.remove("flipped"),clearInterval(n)}.bind(e),500)}}))}this.clockStrings.d=pad(this.clockValues.d,2),this.clockStrings.h=pad(this.clockValues.h,2),this.clockStrings.m=pad(this.clockValues.m,2),this.clockStrings.s=pad(this.clockValues.s,2),this.clockValuesAsString=(this.clockStrings.d+this.clockStrings.h+this.clockStrings.m+this.clockStrings.s).split(""),this.rotorLeafFront.forEach((function(t,o){t.textContent=e.prevClockValuesAsString[o]})),this.rotorBottom.forEach((function(t,o){t.textContent=e.prevClockValuesAsString[o]})),t?(o.call(this),n.call(this)):(setTimeout(o.bind(this),500),setTimeout(n.bind(this),500)),this.prevClockValuesAsString=this.clockValuesAsString}}]),e}();function pad(e,t){return(e=e.toString()).length<t?pad("0"+e,t):e}function appendChildren(e,t){t.forEach((function(t){e.appendChild(t)}))}